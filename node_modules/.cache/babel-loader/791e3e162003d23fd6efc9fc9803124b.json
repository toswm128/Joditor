{"ast":null,"code":"var _a;\n\nimport WriteEditorState from \"./state\";\nimport produce from \"immer\";\nimport { ADD_LINE, CLOSE_TAG_BOX, DROP_IMG, DROP_LINE, FOCUS_LINE, FOCUS_NEXT_LINE, FOCUS_NEXT_TAG, FOCUS_PREV_LINE, FOCUS_PREV_TAG, FOCUS_SET_UP_TAG, OPEN_TAG_BOX, PUT_SET_UP, REDO, REMOVE_LINE, REMOVE_LINE_ONLY, RESET, SEARCH_TAG, SET_BANNER, SET_IMG, SET_LINE_TEXT, SET_TAG_TO_A, SET_TAG_TO_CALL_OUT, SET_TAG_TO_CODE, SET_TAG_TO_H1, SET_TAG_TO_H2, SET_TAG_TO_H3, SET_TAG_TO_UL, SET_TITLE, UNDO, UNSET_IMG } from \"./actions\";\nimport { createReducer } from \"typesafe-actions\";\nexport default createReducer(WriteEditorState, (_a = {}, _a[SET_LINE_TEXT] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload.id].text = action.payload.text;\n    draft.trashList.push({\n      type: SET_LINE_TEXT,\n      payload: {\n        id: action.payload.id,\n        text: draft.body[action.payload.id].text\n      }\n    });\n  });\n}, _a[FOCUS_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.focusLine = action.payload;\n  });\n}, _a[ADD_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.focusLine = draft.body.length;\n    draft.body.push({\n      id: draft.body.length,\n      text: \"\",\n      tag: \"div\",\n      next: action.payload.next,\n      prev: action.payload.id,\n      src: \"\"\n    });\n    draft.body[action.payload.id].next = draft.body.length - 1;\n    if (action.payload.next !== null) draft.body[action.payload.next].prev = draft.body.length - 1;\n    draft.trashList.push({\n      type: ADD_LINE,\n      payload: {\n        id: draft.body.length - 1,\n        next: action.payload.next,\n        prev: action.payload.id\n      }\n    });\n  });\n}, _a[REMOVE_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.focusIndex = 9999; // delete draft.body[action.payload.id];\n\n    if (draft.head !== action.payload.id) {\n      draft.body[action.payload.prev].next = action.payload.next;\n      draft.focusLine = action.payload.prev;\n    } else {\n      draft.head = action.payload.next;\n      draft.focusLine = action.payload.next;\n    }\n\n    if (action.payload.next !== null) draft.body[action.payload.next].prev = action.payload.prev;\n    draft.setTexter = !draft.setTexter;\n  });\n}, _a[REMOVE_LINE_ONLY] = function (state, action) {\n  return produce(state, function (draft) {\n    // delete draft.body[action.payload.id];\n    if (draft.head !== action.payload.id) {\n      if (draft.updatter !== 1) {\n        draft.trashList.splice(draft.trashList.length - draft.updatter, draft.trashList.length - 1);\n        draft.updatter = 1;\n      }\n\n      draft.focusIndex = draft.body[action.payload.prev].text.length;\n      draft.body[action.payload.prev].text += draft.body[action.payload.id].text;\n      draft.body[action.payload.prev].next = action.payload.next;\n      if (action.payload.next !== null) draft.body[action.payload.next].prev = action.payload.prev;\n      draft.focusLine = action.payload.prev;\n    }\n  });\n}, _a[DROP_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    var source = draft.body[action.payload.id];\n    var nextS = source.next;\n    var prevS = source.prev;\n    var idS = source.id;\n    var destination = draft.body[action.payload.destinationID];\n    var nextD = destination.next;\n    var prevD = destination.prev;\n    var idD = destination.id;\n\n    if (Math.abs(action.payload.source - action.payload.destination) === 1) {\n      if (action.payload.source > action.payload.destination) {\n        if (prevD !== null) {\n          draft.body[prevD].next = idS;\n        } else draft.head = idS;\n\n        draft.body[idS].prev = prevD;\n        draft.body[idS].next = idD;\n        draft.body[idD].prev = idS;\n        draft.body[idD].next = nextS;\n\n        if (nextS !== null) {\n          draft.body[nextS].prev = idD;\n        }\n      } else if (action.payload.source < action.payload.destination) {\n        if (prevS !== null) {\n          draft.body[prevS].next = idD;\n        } else draft.head = idD;\n\n        draft.body[idD].prev = prevS;\n        draft.body[idD].next = idS;\n        draft.body[idS].prev = idD;\n        draft.body[idS].next = nextD;\n\n        if (nextD !== null) {\n          draft.body[nextD].prev = idS;\n        }\n      }\n    } else {\n      if (action.payload.source > action.payload.destination) {\n        if (prevD !== null) {\n          draft.body[prevD].next = idS;\n        } else draft.head = idS;\n\n        draft.body[idS].prev = prevD;\n        draft.body[idS].next = idD;\n        draft.body[idD].prev = idS;\n\n        if (prevS !== null) {\n          draft.body[prevS].next = nextS;\n        }\n\n        if (nextS !== null) {\n          draft.body[nextS].prev = prevS;\n        }\n      } else if (action.payload.source < action.payload.destination) {\n        if (prevS !== null) {\n          draft.body[prevS].next = nextS;\n        } else if (nextS !== null) draft.head = nextS;\n\n        draft.body[idS].prev = idD;\n        draft.body[idS].next = nextD;\n        draft.body[idD].next = idS;\n\n        if (nextS !== null) {\n          draft.body[nextS].prev = prevS;\n        }\n\n        if (nextD !== null) {\n          draft.body[nextD].prev = idS;\n        }\n      }\n    }\n  });\n}, _a[SET_IMG] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload.id].src = action.payload.src;\n    if (draft.body[action.payload.id].next !== null) draft.focusLine = draft.body[action.payload.id].next;else draft.focusLine = draft.body[action.payload.id].prev;\n  });\n}, _a[UNSET_IMG] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"div\";\n    draft.body[action.payload].src = \"\";\n    draft.focusLine = action.payload;\n  });\n}, _a[DROP_IMG] = function (state, action) {\n  return produce(state, function (draft) {\n    var id = action.payload.id;\n    if (draft.body[id].next !== null) draft.focusLine = draft.body[id].next;else draft.focusLine = draft.body[id].prev;\n    if (draft.body[id].next !== null) draft.body[draft.body[id].next].prev = draft.body.length - 1;\n    draft.body.push({\n      id: draft.body.length,\n      text: \"\",\n      tag: action.payload.isA ? \"img\" : \"a\",\n      next: draft.body[id].next,\n      prev: id,\n      src: action.payload.src\n    });\n    draft.body[id].next = draft.body.length - 1;\n  });\n}, _a[SET_TAG_TO_UL] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload.id].tag = \"ul\";\n    draft.focusIndex = action.payload.focusIndex;\n  });\n}, _a[SET_TAG_TO_H1] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"h1\";\n  });\n}, _a[SET_TAG_TO_H2] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"h2\";\n  });\n}, _a[SET_TAG_TO_H3] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"h3\";\n  });\n}, _a[SET_TAG_TO_A] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"a\";\n  });\n}, _a[SET_TAG_TO_CODE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"code\";\n  });\n}, _a[SET_TAG_TO_CALL_OUT] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body[action.payload].tag = \"callOut\";\n  });\n}, _a[SEARCH_TAG] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.searchWord = action.payload;\n  });\n}, _a[FOCUS_NEXT_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.setFocuser = !draft.setFocuser;\n    draft.focusLine = draft.body[action.payload.id].next;\n    draft.focusIndex = action.payload.focusIndex;\n  });\n}, _a[FOCUS_PREV_LINE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.setFocuser = !draft.setFocuser;\n    draft.focusLine = draft.body[action.payload.id].prev;\n    draft.focusIndex = action.payload.focusIndex;\n  });\n}, _a[UNDO] = function (state) {\n  return produce(state, function (draft) {\n    draft.trashList.length && draft.recycleList.push(draft.trashList[draft.trashList.length - 1]);\n    var trash = draft.trashList.pop();\n\n    switch (trash === null || trash === void 0 ? void 0 : trash.type) {\n      case SET_LINE_TEXT:\n        draft.body[trash.payload.id].text = trash.payload.text;\n        draft.focusLine = trash.payload.id;\n        break;\n\n      case ADD_LINE:\n        draft.body[trash.payload.prev].next = trash.payload.next;\n        draft.body[trash.payload.next].prev = trash.payload.prev;\n    }\n\n    draft.updatter += 1;\n  });\n}, _a[REDO] = function (state) {\n  return produce(state, function (draft) {\n    draft.recycleList.length && draft.trashList.push(draft.recycleList[draft.recycleList.length - 1]);\n    var recyclables = draft.recycleList.pop();\n\n    switch (recyclables === null || recyclables === void 0 ? void 0 : recyclables.type) {\n      case SET_LINE_TEXT:\n        draft.body[recyclables.payload.id].text = recyclables.payload.text;\n        draft.focusLine = recyclables.payload.id;\n        break;\n\n      case ADD_LINE:\n        draft.body[recyclables.payload.prev].next = recyclables.payload.id;\n        draft.body[recyclables.payload.next].prev = recyclables.payload.id;\n    }\n\n    draft.updatter += 1;\n  });\n}, _a[SET_BANNER] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.banner = action.payload;\n  });\n}, _a[SET_TITLE] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.title = action.payload;\n  });\n}, _a[RESET] = function (state) {\n  return produce(state, function (draft) {\n    draft.body = [{\n      id: 0,\n      text: \"\",\n      tag: \"div\",\n      next: null,\n      prev: null,\n      src: \"\"\n    }];\n    draft.trashList = [];\n    draft.recycleList = [];\n    draft.title = \"\";\n    draft.banner = undefined;\n    draft.updatter = 1;\n    draft.focusLine = 0;\n    draft.head = 0;\n    draft.focusIndex = 999999;\n    draft.setTexter = false;\n    draft.setFocuser = false;\n    draft.putId = \"\";\n  });\n}, _a[OPEN_TAG_BOX] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.tagBoxId = action.payload;\n  });\n}, _a[CLOSE_TAG_BOX] = function (state) {\n  return produce(state, function (draft) {\n    draft.tagBoxId = null;\n    draft.searchWord = null;\n  });\n}, _a[FOCUS_NEXT_TAG] = function (state) {\n  return produce(state, function (draft) {\n    if (draft.tagBoxFocusIdx === null) {\n      draft.tagBoxFocusIdx = 0;\n    } else {\n      draft.tagBoxFocusIdx += 1;\n    }\n  });\n}, _a[FOCUS_PREV_TAG] = function (state) {\n  return produce(state, function (draft) {\n    if (draft.tagBoxFocusIdx === null) {\n      draft.tagBoxFocusIdx = 0;\n    } else {\n      draft.tagBoxFocusIdx && (draft.tagBoxFocusIdx -= 1);\n    }\n  });\n}, _a[FOCUS_SET_UP_TAG] = function (state) {\n  return produce(state, function (draft) {\n    draft.tagBoxFocusIdx = null;\n  });\n}, _a[PUT_SET_UP] = function (state, action) {\n  return produce(state, function (draft) {\n    draft.body = action.payload.body;\n    draft.title = action.payload.title;\n    draft.putId = action.payload.id;\n  });\n}, _a));","map":{"version":3,"sources":["/Users/jominsu/Documents/GitHub/Joditor/node_modules/joditor/dist/Store/WriteEditorStore/reducer.js"],"names":["_a","WriteEditorState","produce","ADD_LINE","CLOSE_TAG_BOX","DROP_IMG","DROP_LINE","FOCUS_LINE","FOCUS_NEXT_LINE","FOCUS_NEXT_TAG","FOCUS_PREV_LINE","FOCUS_PREV_TAG","FOCUS_SET_UP_TAG","OPEN_TAG_BOX","PUT_SET_UP","REDO","REMOVE_LINE","REMOVE_LINE_ONLY","RESET","SEARCH_TAG","SET_BANNER","SET_IMG","SET_LINE_TEXT","SET_TAG_TO_A","SET_TAG_TO_CALL_OUT","SET_TAG_TO_CODE","SET_TAG_TO_H1","SET_TAG_TO_H2","SET_TAG_TO_H3","SET_TAG_TO_UL","SET_TITLE","UNDO","UNSET_IMG","createReducer","state","action","draft","body","payload","id","text","trashList","push","type","focusLine","length","tag","next","prev","src","focusIndex","head","setTexter","updatter","splice","source","nextS","prevS","idS","destination","destinationID","nextD","prevD","idD","Math","abs","isA","searchWord","setFocuser","recycleList","trash","pop","recyclables","banner","title","undefined","putId","tagBoxId","tagBoxFocusIdx"],"mappings":"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","sourcesContent":["var _a;\nimport WriteEditorState from \"./state\";\nimport produce from \"immer\";\nimport { ADD_LINE, CLOSE_TAG_BOX, DROP_IMG, DROP_LINE, FOCUS_LINE, FOCUS_NEXT_LINE, FOCUS_NEXT_TAG, FOCUS_PREV_LINE, FOCUS_PREV_TAG, FOCUS_SET_UP_TAG, OPEN_TAG_BOX, PUT_SET_UP, REDO, REMOVE_LINE, REMOVE_LINE_ONLY, RESET, SEARCH_TAG, SET_BANNER, SET_IMG, SET_LINE_TEXT, SET_TAG_TO_A, SET_TAG_TO_CALL_OUT, SET_TAG_TO_CODE, SET_TAG_TO_H1, SET_TAG_TO_H2, SET_TAG_TO_H3, SET_TAG_TO_UL, SET_TITLE, UNDO, UNSET_IMG, } from \"./actions\";\nimport { createReducer } from \"typesafe-actions\";\nexport default createReducer(WriteEditorState, (_a = {},\n    _a[SET_LINE_TEXT] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload.id].text = action.payload.text;\n            draft.trashList.push({\n                type: SET_LINE_TEXT,\n                payload: {\n                    id: action.payload.id,\n                    text: draft.body[action.payload.id].text,\n                },\n            });\n        });\n    },\n    _a[FOCUS_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.focusLine = action.payload;\n        });\n    },\n    _a[ADD_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.focusLine = draft.body.length;\n            draft.body.push({\n                id: draft.body.length,\n                text: \"\",\n                tag: \"div\",\n                next: action.payload.next,\n                prev: action.payload.id,\n                src: \"\",\n            });\n            draft.body[action.payload.id].next = draft.body.length - 1;\n            if (action.payload.next !== null)\n                draft.body[action.payload.next].prev = draft.body.length - 1;\n            draft.trashList.push({\n                type: ADD_LINE,\n                payload: {\n                    id: draft.body.length - 1,\n                    next: action.payload.next,\n                    prev: action.payload.id,\n                },\n            });\n        });\n    },\n    _a[REMOVE_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.focusIndex = 9999;\n            // delete draft.body[action.payload.id];\n            if (draft.head !== action.payload.id) {\n                draft.body[action.payload.prev].next = action.payload.next;\n                draft.focusLine = action.payload.prev;\n            }\n            else {\n                draft.head = action.payload.next;\n                draft.focusLine = action.payload.next;\n            }\n            if (action.payload.next !== null)\n                draft.body[action.payload.next].prev = action.payload.prev;\n            draft.setTexter = !draft.setTexter;\n        });\n    },\n    _a[REMOVE_LINE_ONLY] = function (state, action) {\n        return produce(state, function (draft) {\n            // delete draft.body[action.payload.id];\n            if (draft.head !== action.payload.id) {\n                if (draft.updatter !== 1) {\n                    draft.trashList.splice(draft.trashList.length - draft.updatter, draft.trashList.length - 1);\n                    draft.updatter = 1;\n                }\n                draft.focusIndex = draft.body[action.payload.prev].text.length;\n                draft.body[action.payload.prev].text +=\n                    draft.body[action.payload.id].text;\n                draft.body[action.payload.prev].next = action.payload.next;\n                if (action.payload.next !== null)\n                    draft.body[action.payload.next].prev = action.payload.prev;\n                draft.focusLine = action.payload.prev;\n            }\n        });\n    },\n    _a[DROP_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            var source = draft.body[action.payload.id];\n            var nextS = source.next;\n            var prevS = source.prev;\n            var idS = source.id;\n            var destination = draft.body[action.payload.destinationID];\n            var nextD = destination.next;\n            var prevD = destination.prev;\n            var idD = destination.id;\n            if (Math.abs(action.payload.source - action.payload.destination) === 1) {\n                if (action.payload.source > action.payload.destination) {\n                    if (prevD !== null) {\n                        draft.body[prevD].next = idS;\n                    }\n                    else\n                        draft.head = idS;\n                    draft.body[idS].prev = prevD;\n                    draft.body[idS].next = idD;\n                    draft.body[idD].prev = idS;\n                    draft.body[idD].next = nextS;\n                    if (nextS !== null) {\n                        draft.body[nextS].prev = idD;\n                    }\n                }\n                else if (action.payload.source < action.payload.destination) {\n                    if (prevS !== null) {\n                        draft.body[prevS].next = idD;\n                    }\n                    else\n                        draft.head = idD;\n                    draft.body[idD].prev = prevS;\n                    draft.body[idD].next = idS;\n                    draft.body[idS].prev = idD;\n                    draft.body[idS].next = nextD;\n                    if (nextD !== null) {\n                        draft.body[nextD].prev = idS;\n                    }\n                }\n            }\n            else {\n                if (action.payload.source > action.payload.destination) {\n                    if (prevD !== null) {\n                        draft.body[prevD].next = idS;\n                    }\n                    else\n                        draft.head = idS;\n                    draft.body[idS].prev = prevD;\n                    draft.body[idS].next = idD;\n                    draft.body[idD].prev = idS;\n                    if (prevS !== null) {\n                        draft.body[prevS].next = nextS;\n                    }\n                    if (nextS !== null) {\n                        draft.body[nextS].prev = prevS;\n                    }\n                }\n                else if (action.payload.source < action.payload.destination) {\n                    if (prevS !== null) {\n                        draft.body[prevS].next = nextS;\n                    }\n                    else if (nextS !== null)\n                        draft.head = nextS;\n                    draft.body[idS].prev = idD;\n                    draft.body[idS].next = nextD;\n                    draft.body[idD].next = idS;\n                    if (nextS !== null) {\n                        draft.body[nextS].prev = prevS;\n                    }\n                    if (nextD !== null) {\n                        draft.body[nextD].prev = idS;\n                    }\n                }\n            }\n        });\n    },\n    _a[SET_IMG] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload.id].src = action.payload.src;\n            if (draft.body[action.payload.id].next !== null)\n                draft.focusLine = draft.body[action.payload.id].next;\n            else\n                draft.focusLine = draft.body[action.payload.id].prev;\n        });\n    },\n    _a[UNSET_IMG] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"div\";\n            draft.body[action.payload].src = \"\";\n            draft.focusLine = action.payload;\n        });\n    },\n    _a[DROP_IMG] = function (state, action) {\n        return produce(state, function (draft) {\n            var id = action.payload.id;\n            if (draft.body[id].next !== null)\n                draft.focusLine = draft.body[id].next;\n            else\n                draft.focusLine = draft.body[id].prev;\n            if (draft.body[id].next !== null)\n                draft.body[draft.body[id].next].prev = draft.body.length - 1;\n            draft.body.push({\n                id: draft.body.length,\n                text: \"\",\n                tag: action.payload.isA ? \"img\" : \"a\",\n                next: draft.body[id].next,\n                prev: id,\n                src: action.payload.src,\n            });\n            draft.body[id].next = draft.body.length - 1;\n        });\n    },\n    _a[SET_TAG_TO_UL] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload.id].tag = \"ul\";\n            draft.focusIndex = action.payload.focusIndex;\n        });\n    },\n    _a[SET_TAG_TO_H1] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"h1\";\n        });\n    },\n    _a[SET_TAG_TO_H2] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"h2\";\n        });\n    },\n    _a[SET_TAG_TO_H3] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"h3\";\n        });\n    },\n    _a[SET_TAG_TO_A] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"a\";\n        });\n    },\n    _a[SET_TAG_TO_CODE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"code\";\n        });\n    },\n    _a[SET_TAG_TO_CALL_OUT] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body[action.payload].tag = \"callOut\";\n        });\n    },\n    _a[SEARCH_TAG] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.searchWord = action.payload;\n        });\n    },\n    _a[FOCUS_NEXT_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.setFocuser = !draft.setFocuser;\n            draft.focusLine = draft.body[action.payload.id].next;\n            draft.focusIndex = action.payload.focusIndex;\n        });\n    },\n    _a[FOCUS_PREV_LINE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.setFocuser = !draft.setFocuser;\n            draft.focusLine = draft.body[action.payload.id].prev;\n            draft.focusIndex = action.payload.focusIndex;\n        });\n    },\n    _a[UNDO] = function (state) {\n        return produce(state, function (draft) {\n            draft.trashList.length &&\n                draft.recycleList.push(draft.trashList[draft.trashList.length - 1]);\n            var trash = draft.trashList.pop();\n            switch (trash === null || trash === void 0 ? void 0 : trash.type) {\n                case SET_LINE_TEXT:\n                    draft.body[trash.payload.id].text = trash.payload.text;\n                    draft.focusLine = trash.payload.id;\n                    break;\n                case ADD_LINE:\n                    draft.body[trash.payload.prev].next = trash.payload.next;\n                    draft.body[trash.payload.next].prev = trash.payload.prev;\n            }\n            draft.updatter += 1;\n        });\n    },\n    _a[REDO] = function (state) {\n        return produce(state, function (draft) {\n            draft.recycleList.length &&\n                draft.trashList.push(draft.recycleList[draft.recycleList.length - 1]);\n            var recyclables = draft.recycleList.pop();\n            switch (recyclables === null || recyclables === void 0 ? void 0 : recyclables.type) {\n                case SET_LINE_TEXT:\n                    draft.body[recyclables.payload.id].text = recyclables.payload.text;\n                    draft.focusLine = recyclables.payload.id;\n                    break;\n                case ADD_LINE:\n                    draft.body[recyclables.payload.prev].next = recyclables.payload.id;\n                    draft.body[recyclables.payload.next].prev = recyclables.payload.id;\n            }\n            draft.updatter += 1;\n        });\n    },\n    _a[SET_BANNER] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.banner = action.payload;\n        });\n    },\n    _a[SET_TITLE] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.title = action.payload;\n        });\n    },\n    _a[RESET] = function (state) {\n        return produce(state, function (draft) {\n            draft.body = [\n                {\n                    id: 0,\n                    text: \"\",\n                    tag: \"div\",\n                    next: null,\n                    prev: null,\n                    src: \"\",\n                },\n            ];\n            draft.trashList = [];\n            draft.recycleList = [];\n            draft.title = \"\";\n            draft.banner = undefined;\n            draft.updatter = 1;\n            draft.focusLine = 0;\n            draft.head = 0;\n            draft.focusIndex = 999999;\n            draft.setTexter = false;\n            draft.setFocuser = false;\n            draft.putId = \"\";\n        });\n    },\n    _a[OPEN_TAG_BOX] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.tagBoxId = action.payload;\n        });\n    },\n    _a[CLOSE_TAG_BOX] = function (state) {\n        return produce(state, function (draft) {\n            draft.tagBoxId = null;\n            draft.searchWord = null;\n        });\n    },\n    _a[FOCUS_NEXT_TAG] = function (state) {\n        return produce(state, function (draft) {\n            if (draft.tagBoxFocusIdx === null) {\n                draft.tagBoxFocusIdx = 0;\n            }\n            else {\n                draft.tagBoxFocusIdx += 1;\n            }\n        });\n    },\n    _a[FOCUS_PREV_TAG] = function (state) {\n        return produce(state, function (draft) {\n            if (draft.tagBoxFocusIdx === null) {\n                draft.tagBoxFocusIdx = 0;\n            }\n            else {\n                draft.tagBoxFocusIdx && (draft.tagBoxFocusIdx -= 1);\n            }\n        });\n    },\n    _a[FOCUS_SET_UP_TAG] = function (state) {\n        return produce(state, function (draft) {\n            draft.tagBoxFocusIdx = null;\n        });\n    },\n    _a[PUT_SET_UP] = function (state, action) {\n        return produce(state, function (draft) {\n            draft.body = action.payload.body;\n            draft.title = action.payload.title;\n            draft.putId = action.payload.id;\n        });\n    },\n    _a));\n"]},"metadata":{},"sourceType":"module"}