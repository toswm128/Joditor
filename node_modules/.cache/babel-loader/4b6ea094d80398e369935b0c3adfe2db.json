{"ast":null,"code":"import _defineProperty from\"/Users/jominsu/Documents/GitHub/Joditor/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";var _createReducer;import WriteEditorState from\"./state\";import produce from\"immer\";import{ADD_LINE,CLOSE_TAG_BOX,DROP_IMG,DROP_LINE,FOCUS_LINE,FOCUS_NEXT_LINE,FOCUS_NEXT_TAG,FOCUS_PREV_LINE,FOCUS_PREV_TAG,FOCUS_SET_UP_TAG,OPEN_TAG_BOX,PUT_SET_UP,REDO,REMOVE_LINE,REMOVE_LINE_ONLY,RESET,SEARCH_TAG,SET_BANNER,SET_IMG,SET_LINE_TEXT,SET_TAG_TO_A,SET_TAG_TO_CALL_OUT,SET_TAG_TO_CODE,SET_TAG_TO_H1,SET_TAG_TO_H2,SET_TAG_TO_H3,SET_TAG_TO_UL,SET_TITLE,UNDO,UNSET_IMG}from\"./actions\";import{createReducer}from\"typesafe-actions\";export default createReducer(WriteEditorState,(_createReducer={},_defineProperty(_createReducer,SET_LINE_TEXT,function(state,action){return produce(state,function(draft){draft.body[action.payload.id].text=action.payload.text;draft.trashList.push({type:SET_LINE_TEXT,payload:{id:action.payload.id,text:draft.body[action.payload.id].text}});});}),_defineProperty(_createReducer,FOCUS_LINE,function(state,action){return produce(state,function(draft){draft.focusLine=action.payload;});}),_defineProperty(_createReducer,ADD_LINE,function(state,action){return produce(state,function(draft){draft.focusLine=draft.body.length;draft.body.push({id:draft.body.length,text:\"\",tag:\"div\",next:action.payload.next,prev:action.payload.id,src:\"\"});draft.body[action.payload.id].next=draft.body.length-1;if(action.payload.next!==null)draft.body[action.payload.next].prev=draft.body.length-1;draft.trashList.push({type:ADD_LINE,payload:{id:draft.body.length-1,next:action.payload.next,prev:action.payload.id}});});}),_defineProperty(_createReducer,REMOVE_LINE,function(state,action){return produce(state,function(draft){draft.focusIndex=9999;// delete draft.body[action.payload.id];\nif(draft.head!==action.payload.id){draft.body[action.payload.prev].next=action.payload.next;draft.focusLine=action.payload.prev;}else{draft.head=action.payload.next;draft.focusLine=action.payload.next;}if(action.payload.next!==null)draft.body[action.payload.next].prev=action.payload.prev;draft.setTexter=!draft.setTexter;});}),_defineProperty(_createReducer,REMOVE_LINE_ONLY,function(state,action){return produce(state,function(draft){// delete draft.body[action.payload.id];\nif(draft.head!==action.payload.id){if(draft.updatter!==1){draft.trashList.splice(draft.trashList.length-draft.updatter,draft.trashList.length-1);draft.updatter=1;}draft.focusIndex=draft.body[action.payload.prev].text.length;draft.body[action.payload.prev].text+=draft.body[action.payload.id].text;draft.body[action.payload.prev].next=action.payload.next;if(action.payload.next!==null)draft.body[action.payload.next].prev=action.payload.prev;draft.focusLine=action.payload.prev;}});}),_defineProperty(_createReducer,DROP_LINE,function(state,action){return produce(state,function(draft){var source=draft.body[action.payload.id];var nextS=source.next;var prevS=source.prev;var idS=source.id;var destination=draft.body[action.payload.destinationID];var nextD=destination.next;var prevD=destination.prev;var idD=destination.id;if(Math.abs(action.payload.source-action.payload.destination)===1){if(action.payload.source>action.payload.destination){if(prevD!==null){draft.body[prevD].next=idS;}else draft.head=idS;draft.body[idS].prev=prevD;draft.body[idS].next=idD;draft.body[idD].prev=idS;draft.body[idD].next=nextS;if(nextS!==null){draft.body[nextS].prev=idD;}}else if(action.payload.source<action.payload.destination){if(prevS!==null){draft.body[prevS].next=idD;}else draft.head=idD;draft.body[idD].prev=prevS;draft.body[idD].next=idS;draft.body[idS].prev=idD;draft.body[idS].next=nextD;if(nextD!==null){draft.body[nextD].prev=idS;}}}else{if(action.payload.source>action.payload.destination){if(prevD!==null){draft.body[prevD].next=idS;}else draft.head=idS;draft.body[idS].prev=prevD;draft.body[idS].next=idD;draft.body[idD].prev=idS;if(prevS!==null){draft.body[prevS].next=nextS;}if(nextS!==null){draft.body[nextS].prev=prevS;}}else if(action.payload.source<action.payload.destination){if(prevS!==null){draft.body[prevS].next=nextS;}else if(nextS!==null)draft.head=nextS;draft.body[idS].prev=idD;draft.body[idS].next=nextD;draft.body[idD].next=idS;if(nextS!==null){draft.body[nextS].prev=prevS;}if(nextD!==null){draft.body[nextD].prev=idS;}}}});}),_defineProperty(_createReducer,SET_IMG,function(state,action){return produce(state,function(draft){draft.body[action.payload.id].src=action.payload.src;if(draft.body[action.payload.id].next!==null)draft.focusLine=draft.body[action.payload.id].next;else draft.focusLine=draft.body[action.payload.id].prev;});}),_defineProperty(_createReducer,UNSET_IMG,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"div\";draft.body[action.payload].src=\"\";draft.focusLine=action.payload;});}),_defineProperty(_createReducer,DROP_IMG,function(state,action){return produce(state,function(draft){var id=action.payload.id;if(draft.body[id].next!==null)draft.focusLine=draft.body[id].next;else draft.focusLine=draft.body[id].prev;if(draft.body[id].next!==null)draft.body[draft.body[id].next].prev=draft.body.length-1;draft.body.push({id:draft.body.length,text:\"\",tag:action.payload.isA?\"img\":\"a\",next:draft.body[id].next,prev:id,src:action.payload.src});draft.body[id].next=draft.body.length-1;});}),_defineProperty(_createReducer,SET_TAG_TO_UL,function(state,action){return produce(state,function(draft){draft.body[action.payload.id].tag=\"ul\";draft.focusIndex=action.payload.focusIndex;});}),_defineProperty(_createReducer,SET_TAG_TO_H1,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"h1\";});}),_defineProperty(_createReducer,SET_TAG_TO_H2,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"h2\";});}),_defineProperty(_createReducer,SET_TAG_TO_H3,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"h3\";});}),_defineProperty(_createReducer,SET_TAG_TO_A,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"a\";});}),_defineProperty(_createReducer,SET_TAG_TO_CODE,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"code\";});}),_defineProperty(_createReducer,SET_TAG_TO_CALL_OUT,function(state,action){return produce(state,function(draft){draft.body[action.payload].tag=\"callOut\";});}),_defineProperty(_createReducer,SEARCH_TAG,function(state,action){return produce(state,function(draft){draft.searchWord=action.payload;});}),_defineProperty(_createReducer,FOCUS_NEXT_LINE,function(state,action){return produce(state,function(draft){draft.setFocuser=!draft.setFocuser;draft.focusLine=draft.body[action.payload.id].next;draft.focusIndex=action.payload.focusIndex;});}),_defineProperty(_createReducer,FOCUS_PREV_LINE,function(state,action){return produce(state,function(draft){draft.setFocuser=!draft.setFocuser;draft.focusLine=draft.body[action.payload.id].prev;draft.focusIndex=action.payload.focusIndex;});}),_defineProperty(_createReducer,UNDO,function(state){return produce(state,function(draft){draft.trashList.length&&draft.recycleList.push(draft.trashList[draft.trashList.length-1]);var trash=draft.trashList.pop();switch(trash===null||trash===void 0?void 0:trash.type){case SET_LINE_TEXT:draft.body[trash.payload.id].text=trash.payload.text;draft.focusLine=trash.payload.id;break;case ADD_LINE:draft.body[trash.payload.prev].next=trash.payload.next;draft.body[trash.payload.next].prev=trash.payload.prev;}draft.updatter+=1;});}),_defineProperty(_createReducer,REDO,function(state){return produce(state,function(draft){draft.recycleList.length&&draft.trashList.push(draft.recycleList[draft.recycleList.length-1]);var recyclables=draft.recycleList.pop();switch(recyclables===null||recyclables===void 0?void 0:recyclables.type){case SET_LINE_TEXT:draft.body[recyclables.payload.id].text=recyclables.payload.text;draft.focusLine=recyclables.payload.id;break;case ADD_LINE:draft.body[recyclables.payload.prev].next=recyclables.payload.id;draft.body[recyclables.payload.next].prev=recyclables.payload.id;}draft.updatter+=1;});}),_defineProperty(_createReducer,SET_BANNER,function(state,action){return produce(state,function(draft){draft.banner=action.payload;});}),_defineProperty(_createReducer,SET_TITLE,function(state,action){return produce(state,function(draft){draft.title=action.payload;});}),_defineProperty(_createReducer,RESET,function(state){return produce(state,function(draft){draft.body=[{id:0,text:\"\",tag:\"div\",next:null,prev:null,src:\"\"}];draft.trashList=[];draft.recycleList=[];draft.title=\"\";draft.banner=undefined;draft.updatter=1;draft.focusLine=0;draft.head=0;draft.focusIndex=999999;draft.setTexter=false;draft.setFocuser=false;draft.putId=\"\";});}),_defineProperty(_createReducer,OPEN_TAG_BOX,function(state,action){return produce(state,function(draft){draft.tagBoxId=action.payload;});}),_defineProperty(_createReducer,CLOSE_TAG_BOX,function(state){return produce(state,function(draft){draft.tagBoxId=null;draft.searchWord=null;});}),_defineProperty(_createReducer,FOCUS_NEXT_TAG,function(state){return produce(state,function(draft){if(draft.tagBoxFocusIdx===null){draft.tagBoxFocusIdx=0;}else{draft.tagBoxFocusIdx+=1;}});}),_defineProperty(_createReducer,FOCUS_PREV_TAG,function(state){return produce(state,function(draft){if(draft.tagBoxFocusIdx===null){draft.tagBoxFocusIdx=0;}else{draft.tagBoxFocusIdx&&(draft.tagBoxFocusIdx-=1);}});}),_defineProperty(_createReducer,FOCUS_SET_UP_TAG,function(state){return produce(state,function(draft){draft.tagBoxFocusIdx=null;});}),_defineProperty(_createReducer,PUT_SET_UP,function(state,action){return produce(state,function(draft){draft.body=action.payload.body;draft.title=action.payload.title;draft.putId=action.payload.id;});}),_createReducer));","map":{"version":3,"sources":["/Users/jominsu/Documents/GitHub/Joditor/src/lib/Store/WriteEditorStore/reducer.ts"],"names":["WriteEditorState","produce","ADD_LINE","CLOSE_TAG_BOX","DROP_IMG","DROP_LINE","FOCUS_LINE","FOCUS_NEXT_LINE","FOCUS_NEXT_TAG","FOCUS_PREV_LINE","FOCUS_PREV_TAG","FOCUS_SET_UP_TAG","OPEN_TAG_BOX","PUT_SET_UP","REDO","REMOVE_LINE","REMOVE_LINE_ONLY","RESET","SEARCH_TAG","SET_BANNER","SET_IMG","SET_LINE_TEXT","SET_TAG_TO_A","SET_TAG_TO_CALL_OUT","SET_TAG_TO_CODE","SET_TAG_TO_H1","SET_TAG_TO_H2","SET_TAG_TO_H3","SET_TAG_TO_UL","SET_TITLE","UNDO","UNSET_IMG","createReducer","state","action","draft","body","payload","id","text","trashList","push","type","focusLine","length","tag","next","prev","src","focusIndex","head","setTexter","updatter","splice","source","nextS","prevS","idS","destination","destinationID","nextD","prevD","idD","Math","abs","isA","searchWord","setFocuser","recycleList","trash","pop","recyclables","banner","title","undefined","putId","tagBoxId","tagBoxFocusIdx"],"mappings":"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","sourcesContent":["import WriteEditorState from \"./state\";\nimport produce from \"immer\";\nimport {\n  ADD_LINE,\n  CLOSE_TAG_BOX,\n  DROP_IMG,\n  DROP_LINE,\n  FOCUS_LINE,\n  FOCUS_NEXT_LINE,\n  FOCUS_NEXT_TAG,\n  FOCUS_PREV_LINE,\n  FOCUS_PREV_TAG,\n  FOCUS_SET_UP_TAG,\n  OPEN_TAG_BOX,\n  PUT_SET_UP,\n  REDO,\n  REMOVE_LINE,\n  REMOVE_LINE_ONLY,\n  RESET,\n  SEARCH_TAG,\n  SET_BANNER,\n  SET_IMG,\n  SET_LINE_TEXT,\n  SET_TAG_TO_A,\n  SET_TAG_TO_CALL_OUT,\n  SET_TAG_TO_CODE,\n  SET_TAG_TO_H1,\n  SET_TAG_TO_H2,\n  SET_TAG_TO_H3,\n  SET_TAG_TO_UL,\n  SET_TITLE,\n  UNDO,\n  UNSET_IMG,\n} from \"./actions\";\nimport { WriteEditorStateType } from \"./type\";\nimport { createReducer } from \"typesafe-actions\";\n\nexport default createReducer<WriteEditorStateType>(WriteEditorState, {\n  [SET_LINE_TEXT]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload.id].text = action.payload.text;\n      draft.trashList.push({\n        type: SET_LINE_TEXT,\n        payload: {\n          id: action.payload.id,\n          text: draft.body[action.payload.id].text,\n        },\n      });\n    }),\n  [FOCUS_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.focusLine = action.payload;\n    }),\n  [ADD_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.focusLine = draft.body.length;\n      draft.body.push({\n        id: draft.body.length,\n        text: \"\",\n        tag: \"div\",\n        next: action.payload.next,\n        prev: action.payload.id,\n        src: \"\",\n      });\n      draft.body[action.payload.id].next = draft.body.length - 1;\n      if (action.payload.next !== null)\n        draft.body[action.payload.next].prev = draft.body.length - 1;\n      draft.trashList.push({\n        type: ADD_LINE,\n        payload: {\n          id: draft.body.length - 1,\n          next: action.payload.next,\n          prev: action.payload.id,\n        },\n      });\n    }),\n  [REMOVE_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.focusIndex = 9999;\n      // delete draft.body[action.payload.id];\n\n      if (draft.head !== action.payload.id) {\n        draft.body[action.payload.prev].next = action.payload.next;\n        draft.focusLine = action.payload.prev;\n      } else {\n        draft.head = action.payload.next;\n        draft.focusLine = action.payload.next;\n      }\n      if (action.payload.next !== null)\n        draft.body[action.payload.next].prev = action.payload.prev;\n      draft.setTexter = !draft.setTexter;\n    }),\n  [REMOVE_LINE_ONLY]: (state, action) =>\n    produce(state, (draft) => {\n      // delete draft.body[action.payload.id];\n      if (draft.head !== action.payload.id) {\n        if (draft.updatter !== 1) {\n          draft.trashList.splice(\n            draft.trashList.length - draft.updatter,\n            draft.trashList.length - 1\n          );\n          draft.updatter = 1;\n        }\n        draft.focusIndex = draft.body[action.payload.prev].text.length;\n        draft.body[action.payload.prev].text +=\n          draft.body[action.payload.id].text;\n        draft.body[action.payload.prev].next = action.payload.next;\n        if (action.payload.next !== null)\n          draft.body[action.payload.next].prev = action.payload.prev;\n        draft.focusLine = action.payload.prev;\n      }\n    }),\n\n  [DROP_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      const source = draft.body[action.payload.id];\n      const nextS = source.next;\n      const prevS = source.prev;\n      const idS = source.id;\n      const destination = draft.body[action.payload.destinationID];\n      const nextD = destination.next;\n      const prevD = destination.prev;\n      const idD = destination.id;\n\n      if (Math.abs(action.payload.source - action.payload.destination) === 1) {\n        if (action.payload.source > action.payload.destination) {\n          if (prevD !== null) {\n            draft.body[prevD].next = idS;\n          } else draft.head = idS;\n          draft.body[idS].prev = prevD;\n          draft.body[idS].next = idD;\n          draft.body[idD].prev = idS;\n          draft.body[idD].next = nextS;\n          if (nextS !== null) {\n            draft.body[nextS].prev = idD;\n          }\n        } else if (action.payload.source < action.payload.destination) {\n          if (prevS !== null) {\n            draft.body[prevS].next = idD;\n          } else draft.head = idD;\n          draft.body[idD].prev = prevS;\n          draft.body[idD].next = idS;\n          draft.body[idS].prev = idD;\n          draft.body[idS].next = nextD;\n          if (nextD !== null) {\n            draft.body[nextD].prev = idS;\n          }\n        }\n      } else {\n        if (action.payload.source > action.payload.destination) {\n          if (prevD !== null) {\n            draft.body[prevD].next = idS;\n          } else draft.head = idS;\n\n          draft.body[idS].prev = prevD;\n          draft.body[idS].next = idD;\n          draft.body[idD].prev = idS;\n          if (prevS !== null) {\n            draft.body[prevS].next = nextS;\n          }\n          if (nextS !== null) {\n            draft.body[nextS].prev = prevS;\n          }\n        } else if (action.payload.source < action.payload.destination) {\n          if (prevS !== null) {\n            draft.body[prevS].next = nextS;\n          } else if (nextS !== null) draft.head = nextS;\n          draft.body[idS].prev = idD;\n          draft.body[idS].next = nextD;\n          draft.body[idD].next = idS;\n          if (nextS !== null) {\n            draft.body[nextS].prev = prevS;\n          }\n          if (nextD !== null) {\n            draft.body[nextD].prev = idS;\n          }\n        }\n      }\n    }),\n\n  [SET_IMG]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload.id].src = action.payload.src;\n      if (draft.body[action.payload.id].next !== null)\n        draft.focusLine = draft.body[action.payload.id].next;\n      else draft.focusLine = draft.body[action.payload.id].prev;\n    }),\n  [UNSET_IMG]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"div\";\n      draft.body[action.payload].src = \"\";\n      draft.focusLine = action.payload;\n    }),\n  [DROP_IMG]: (state, action) =>\n    produce(state, (draft) => {\n      const id = action.payload.id;\n      if (draft.body[id].next !== null) draft.focusLine = draft.body[id].next;\n      else draft.focusLine = draft.body[id].prev;\n      if (draft.body[id].next !== null)\n        draft.body[draft.body[id].next!].prev = draft.body.length - 1;\n\n      draft.body.push({\n        id: draft.body.length,\n        text: \"\",\n        tag: action.payload.isA ? \"img\" : \"a\",\n        next: draft.body[id].next,\n        prev: id,\n        src: action.payload.src,\n      });\n      draft.body[id].next = draft.body.length - 1;\n    }),\n  [SET_TAG_TO_UL]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload.id].tag = \"ul\";\n      draft.focusIndex = action.payload.focusIndex;\n    }),\n  [SET_TAG_TO_H1]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"h1\";\n    }),\n  [SET_TAG_TO_H2]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"h2\";\n    }),\n  [SET_TAG_TO_H3]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"h3\";\n    }),\n  [SET_TAG_TO_A]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"a\";\n    }),\n  [SET_TAG_TO_CODE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"code\";\n    }),\n  [SET_TAG_TO_CALL_OUT]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body[action.payload].tag = \"callOut\";\n    }),\n  [SEARCH_TAG]: (state, action) =>\n    produce(state, (draft) => {\n      draft.searchWord = action.payload;\n    }),\n  [FOCUS_NEXT_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.setFocuser = !draft.setFocuser;\n      draft.focusLine = draft.body[action.payload.id].next;\n      draft.focusIndex = action.payload.focusIndex;\n    }),\n  [FOCUS_PREV_LINE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.setFocuser = !draft.setFocuser;\n      draft.focusLine = draft.body[action.payload.id].prev;\n      draft.focusIndex = action.payload.focusIndex;\n    }),\n\n  [UNDO]: (state) =>\n    produce(state, (draft) => {\n      draft.trashList.length &&\n        draft.recycleList.push(draft.trashList[draft.trashList.length - 1]);\n      const trash = draft.trashList.pop();\n      switch (trash?.type) {\n        case SET_LINE_TEXT:\n          draft.body[trash.payload.id].text = trash.payload.text;\n          draft.focusLine = trash.payload.id;\n          break;\n        case ADD_LINE:\n          draft.body[trash.payload.prev].next = trash.payload.next;\n          draft.body[trash.payload.next].prev = trash.payload.prev;\n      }\n\n      draft.updatter += 1;\n    }),\n  [REDO]: (state) =>\n    produce(state, (draft) => {\n      draft.recycleList.length &&\n        draft.trashList.push(draft.recycleList[draft.recycleList.length - 1]);\n      const recyclables = draft.recycleList.pop();\n      switch (recyclables?.type) {\n        case SET_LINE_TEXT:\n          draft.body[recyclables.payload.id].text = recyclables.payload.text;\n          draft.focusLine = recyclables.payload.id;\n          break;\n        case ADD_LINE:\n          draft.body[recyclables.payload.prev].next = recyclables.payload.id;\n          draft.body[recyclables.payload.next].prev = recyclables.payload.id;\n      }\n\n      draft.updatter += 1;\n    }),\n  [SET_BANNER]: (state, action) =>\n    produce(state, (draft) => {\n      draft.banner = action.payload;\n    }),\n  [SET_TITLE]: (state, action) =>\n    produce(state, (draft) => {\n      draft.title = action.payload;\n    }),\n  [RESET]: (state) =>\n    produce(state, (draft) => {\n      draft.body = [\n        {\n          id: 0,\n          text: \"\",\n          tag: \"div\",\n          next: null,\n          prev: null,\n          src: \"\",\n        },\n      ];\n      draft.trashList = [];\n      draft.recycleList = [];\n      draft.title = \"\";\n      draft.banner = undefined;\n      draft.updatter = 1;\n      draft.focusLine = 0;\n      draft.head = 0;\n      draft.focusIndex = 999999;\n      draft.setTexter = false;\n      draft.setFocuser = false;\n      draft.putId = \"\";\n    }),\n\n  [OPEN_TAG_BOX]: (state, action) =>\n    produce(state, (draft) => {\n      draft.tagBoxId = action.payload;\n    }),\n  [CLOSE_TAG_BOX]: (state) =>\n    produce(state, (draft) => {\n      draft.tagBoxId = null;\n      draft.searchWord = null;\n    }),\n\n  [FOCUS_NEXT_TAG]: (state) =>\n    produce(state, (draft) => {\n      if (draft.tagBoxFocusIdx === null) {\n        draft.tagBoxFocusIdx = 0;\n      } else {\n        draft.tagBoxFocusIdx += 1;\n      }\n    }),\n  [FOCUS_PREV_TAG]: (state) =>\n    produce(state, (draft) => {\n      if (draft.tagBoxFocusIdx === null) {\n        draft.tagBoxFocusIdx = 0;\n      } else {\n        draft.tagBoxFocusIdx && (draft.tagBoxFocusIdx -= 1);\n      }\n    }),\n  [FOCUS_SET_UP_TAG]: (state) =>\n    produce(state, (draft) => {\n      draft.tagBoxFocusIdx = null;\n    }),\n  [PUT_SET_UP]: (state, action) =>\n    produce(state, (draft) => {\n      draft.body = action.payload.body;\n      draft.title = action.payload.title;\n      draft.putId = action.payload.id;\n    }),\n});\n"]},"metadata":{},"sourceType":"module"}