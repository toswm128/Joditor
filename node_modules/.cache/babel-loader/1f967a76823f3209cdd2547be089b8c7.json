{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/jominsu/Documents/GitHub/Joditor/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/Users/jominsu/Documents/GitHub/Joditor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _templateObject,_templateObject2;import useWrite from\"lib/write\";import{DragDropContext,Droppable}from\"react-beautiful-dnd\";import EditorItem from\"./EditorItem/EditorItem\";import styled from\"@emotion/styled\";import Submit from\"./Submit/Submit\";import CancelButton from\"./Submit/Buttons/CancelButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditorList=function EditorList(){var _useWrite=useWrite(),_useWrite$WriteEditor=_useWrite.WriteEditorState,body=_useWrite$WriteEditor.body,head=_useWrite$WriteEditor.head,dropLine=_useWrite.dropLine;var dom=[];var next;var snext;body.map(function(_,key){next=snext;if(key===0){next=body[head].next;snext=next;dom.push(body[head]);}if(next!==null){snext=body[next].next;dom.push(body[next]);}else{return null;}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:function onDragEnd(result){var _result$destination,_result$destination2;if(!result.destination)return;console.log(result.destination.index,dom);dropLine(result.source.index,(_result$destination=result.destination)===null||_result$destination===void 0?void 0:_result$destination.index,+result.draggableId,dom[(_result$destination2=result.destination)===null||_result$destination2===void 0?void 0:_result$destination2.index].id);},children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"droppable\",children:function children(provided){return/*#__PURE__*/_jsxs(EditorListContainer,_objectSpread(_objectSpread({ref:provided.innerRef},provided.droppableProps),{},{children:[dom.map(function(line,key){return/*#__PURE__*/_jsx(EditorItem,{line:line,index:key},line.id);}),provided.placeholder]}));}})}),/*#__PURE__*/_jsxs(Buttons,{children:[/*#__PURE__*/_jsx(Submit,{dom:dom}),/*#__PURE__*/_jsx(CancelButton,{})]})]});};var EditorListContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n\"])));var Buttons=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n\"])));export default EditorList;","map":{"version":3,"sources":["/Users/jominsu/Documents/GitHub/Joditor/src/lib/components/Write/WriteEditor/EditorList/EditorList.tsx"],"names":["useWrite","DragDropContext","Droppable","EditorItem","styled","Submit","CancelButton","EditorList","WriteEditorState","body","head","dropLine","dom","next","snext","map","_","key","push","result","destination","console","log","index","source","draggableId","id","provided","innerRef","droppableProps","line","placeholder","EditorListContainer","div","Buttons"],"mappings":"8SAAA,MAAOA,CAAAA,QAAP,KAAqB,WAArB,CACA,OAASC,eAAT,CAA0BC,SAA1B,KAA2C,qBAA3C,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,C,6IAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,cAGIP,QAAQ,EAHZ,iCACEQ,gBADF,CACsBC,IADtB,uBACsBA,IADtB,CAC4BC,IAD5B,uBAC4BA,IAD5B,CAEEC,QAFF,WAEEA,QAFF,CAIA,GAAMC,CAAAA,GAAU,CAAG,EAAnB,CAEA,GAAIC,CAAAA,IAAJ,CACA,GAAIC,CAAAA,KAAJ,CAEAL,IAAI,CAACM,GAAL,CAAS,SAACC,CAAD,CAAIC,GAAJ,CAAoB,CAC3BJ,IAAI,CAAGC,KAAP,CACA,GAAIG,GAAG,GAAK,CAAZ,CAAe,CACbJ,IAAI,CAAGJ,IAAI,CAACC,IAAD,CAAJ,CAAWG,IAAlB,CACAC,KAAK,CAAGD,IAAR,CACAD,GAAG,CAACM,IAAJ,CAAST,IAAI,CAACC,IAAD,CAAb,EACD,CACD,GAAIG,IAAI,GAAK,IAAb,CAAmB,CACjBC,KAAK,CAAGL,IAAI,CAACI,IAAD,CAAJ,CAAWA,IAAnB,CACAD,GAAG,CAACM,IAAJ,CAAST,IAAI,CAACI,IAAD,CAAb,EACD,CAHD,IAGO,CACL,MAAO,KAAP,CACD,CACF,CAbD,EAeA,mBACE,wCACE,KAAC,eAAD,EACE,SAAS,CAAE,mBAACM,MAAD,CAAY,8CACrB,GAAI,CAACA,MAAM,CAACC,WAAZ,CAAyB,OACzBC,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACC,WAAP,CAAmBG,KAA/B,CAAsCX,GAAtC,EACAD,QAAQ,CACNQ,MAAM,CAACK,MAAP,CAAcD,KADR,sBAENJ,MAAM,CAACC,WAFD,8CAEN,oBAAoBG,KAFd,CAGN,CAACJ,MAAM,CAACM,WAHF,CAINb,GAAG,uBAACO,MAAM,CAACC,WAAR,+CAAC,qBAAoBG,KAArB,CAAH,CAA+BG,EAJzB,CAAR,CAMD,CAVH,uBAYE,KAAC,SAAD,EAAW,WAAW,CAAC,WAAvB,UACG,kBAACC,QAAD,qBACC,MAAC,mBAAD,8BACE,GAAG,CAAEA,QAAQ,CAACC,QADhB,EAEMD,QAAQ,CAACE,cAFf,gBAIGjB,GAAG,CAACG,GAAJ,CAAQ,SAACe,IAAD,CAAab,GAAb,qBACP,KAAC,UAAD,EAA0B,IAAI,CAAEa,IAAhC,CAAsC,KAAK,CAAEb,GAA7C,EAAiBa,IAAI,CAACJ,EAAtB,CADO,EAAR,CAJH,CAOGC,QAAQ,CAACI,WAPZ,IADD,EADH,EAZF,EADF,cA2BE,MAAC,OAAD,yBACE,KAAC,MAAD,EAAQ,GAAG,CAAEnB,GAAb,EADF,cAEE,KAAC,YAAD,IAFF,GA3BF,GADF,CAkCD,CA3DD,CA6DA,GAAMoB,CAAAA,mBAAmB,CAAG5B,MAAM,CAAC6B,GAAV,6HAAzB,CAMA,GAAMC,CAAAA,OAAO,CAAG9B,MAAM,CAAC6B,GAAV,+HAAb,CAMA,cAAe1B,CAAAA,UAAf","sourcesContent":["import useWrite from \"lib/write\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport EditorItem from \"./EditorItem/EditorItem\";\nimport { line } from \"lib/Store/WriteEditorStore/type\";\nimport styled from \"@emotion/styled\";\nimport Submit from \"./Submit/Submit\";\nimport CancelButton from \"./Submit/Buttons/CancelButton\";\n\nconst EditorList = () => {\n  const {\n    WriteEditorState: { body, head },\n    dropLine,\n  } = useWrite();\n  const dom: any[] = [];\n\n  let next: number | null;\n  let snext: number | null;\n\n  body.map((_, key: number) => {\n    next = snext;\n    if (key === 0) {\n      next = body[head].next;\n      snext = next;\n      dom.push(body[head]);\n    }\n    if (next !== null) {\n      snext = body[next].next;\n      dom.push(body[next]);\n    } else {\n      return null;\n    }\n  });\n\n  return (\n    <>\n      <DragDropContext\n        onDragEnd={(result) => {\n          if (!result.destination) return;\n          console.log(result.destination.index, dom);\n          dropLine(\n            result.source.index,\n            result.destination?.index,\n            +result.draggableId,\n            dom[result.destination?.index].id\n          );\n        }}\n      >\n        <Droppable droppableId=\"droppable\">\n          {(provided) => (\n            <EditorListContainer\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {dom.map((line: line, key: number) => (\n                <EditorItem key={line.id} line={line} index={key} />\n              ))}\n              {provided.placeholder}\n            </EditorListContainer>\n          )}\n        </Droppable>\n      </DragDropContext>\n      <Buttons>\n        <Submit dom={dom} />\n        <CancelButton />\n      </Buttons>\n    </>\n  );\n};\n\nconst EditorListContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n`;\n\nconst Buttons = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n\nexport default EditorList;\n"]},"metadata":{},"sourceType":"module"}